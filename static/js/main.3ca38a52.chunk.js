(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg=="},242:function(t,e,n){t.exports=n(413)},247:function(t,e,n){},401:function(t,e){},403:function(t,e){},413:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(21),s=n.n(r),l=(n(247),n(23)),o=n(24),c=n(26),u=n(25),d=n(27),p=n(15),h=n(87),m=n.n(h),g=n(17),b=n(80),f=n.n(b),v=n(81),E=n.n(v),S=n(53),j=n.n(S),k=n(40),y=n.n(k),A=n(164),O=n.n(A),w=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"handleChange",value:function(t){this.props.onChange(t)}},{key:"render",value:function(){var t=this,e=this.props.classes;return i.a.createElement("div",{className:e.root},i.a.createElement(f.a,{position:"static",className:e.tab},i.a.createElement(E.a,{value:this.props.page,onChange:function(e,n){return t.handleChange(n)}},i.a.createElement(j.a,{value:"rss",label:"RSS"}),i.a.createElement(j.a,{value:"reddit",label:"Reddit"})),i.a.createElement("div",{className:e.right},i.a.createElement(y.a,{className:e.button,href:"https://github.com/tdloi/feeds-reader"},i.a.createElement("img",{src:O.a,alt:"github icon",className:e.imgIcon}),"Github"))))}}]),e}(i.a.Component),C=Object(g.withStyles)(function(t){return{root:{flexGrow:1,backgroundColor:t.palette.background.paper},tab:{display:"grid",gridTemplateColumns:"2fr 1fr"},right:{display:"flex",justifyContent:"flex-end",marginRight:2*t.spacing.unit},button:{paddingRight:3*t.spacing.unit,paddingLeft:3*t.spacing.unit,color:t.palette.grey.A200},imgIcon:{width:"20px",marginRight:t.spacing.unit,color:t.palette.grey.A200}}})(w),N=n(19),I=n(166),R=n.n(I),B=n(52),L=n.n(B),T=n(82),D=n.n(T),M=n(83),x=n.n(M),U=n(84),Z=n.n(U),J=n(85),W=n.n(J),G=n(86),P=n.n(G);var Y=Object(g.withStyles)({icon:{padding:"2px 5px",borderRadius:"20%"}})(function(t){return i.a.createElement("div",null,i.a.createElement(D.a,{button:!0,onClick:t.onClick},i.a.createElement(x.a,{primary:t.value}),t.displayIcon&&i.a.createElement(Z.a,{onClick:t.onClickIcon},i.a.createElement(W.a,{className:t.classes.icon},i.a.createElement(t.icon,{fontSize:"small"})))),i.a.createElement(P.a,null))}),F=n(18),Q=n(2);function H(t){var e=t.classes,n=t.value;return i.a.createElement("div",{className:e.root},i.a.createElement(F.e,null,n))}H.prototype={classes:Q.PropTypes.object.isRequired};var V=Object(g.withStyles)(function(t){return{root:{margin:"auto",textAlign:"center",padding:t.spacing.unit}}})(H);var X=Object(g.withStyles)(function(t){return{root:Object(N.a)({},t.breakpoints.down("sm"),{width:"100%"})}})(function(t){var e=t.classes,n=t.list,a=t.isEditing,r=t.onClick,s=t.onClickIcon;return i.a.createElement("div",{className:e.root},0===n.length?i.a.createElement(V,{value:"No Item"}):i.a.createElement(L.a,null,n.map(function(t){return i.a.createElement(Y,{key:t.url,value:t.name,displayIcon:a,icon:R.a,onClick:function(){return r(t)},onClickIcon:function(e){return s(e,t)}})})))});var z=Object(g.withStyles)(function(t){var e;return{root:(e={},Object(N.a)(e,t.breakpoints.down("sm"),{minWidth:"100%"}),Object(N.a)(e,t.breakpoints.up("sm"),{minWidth:240}),Object(N.a)(e,t.breakpoints.up("md"),{minWidth:320}),Object(N.a)(e,"backgroundColor",t.palette.background.paper),Object(N.a)(e,"borderRight","solid #757575"),e)}})(function(t){var e=t.classes,n=t.children;return i.a.createElement("section",{className:e.root},n)}),q=Object(g.withStyles)(function(t){var e;return{root:(e={width:"100%",minHeight:"100%"},Object(N.a)(e,t.breakpoints.down("sm"),{display:"block"}),Object(N.a)(e,t.breakpoints.up("sm"),{display:"flex"}),e)}})(function(t){var e=t.classes,n=t.children;return i.a.createElement("div",{className:e.root},n)}),K=n(167),_=n(44),$=n.n(_),tt=n(88),et=n(168),nt=n(173),at=n.n(nt),it=n(172),rt=n.n(it),st=n(171),lt=n.n(st),ot=n(170),ct=n.n(ot),ut=n(41),dt=n.n(ut),pt=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props.classes,e=this.props.icon;return i.a.createElement(y.a,{variant:this.props.variant||"contained",color:this.props.color||"primary",disabled:this.props.disabled||!1,onClick:this.props.onClick,className:t.button},this.props.isLoading&&i.a.createElement(dt.a,{className:t.progress,size:"10px"}),this.props.value,i.a.createElement(e,{className:t.rightIcon}))}}]),e}(i.a.Component),ht=Object(g.withStyles)(function(t){return{button:{margin:t.spacing.unit},rightIcon:{marginLeft:t.spacing.unit},progress:{margin:t.spacing.unit}}})(pt),mt=n(43),gt=n.n(mt),bt=n(42),ft=n.n(bt),vt=function(t){return{root:{display:"flex",marginLeft:t.spacing.unit,marginRight:t.spacing.unit},error:{color:"red"}}},Et=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){return t.props.onSubmit(e)}},i.a.createElement(gt.a,{fullWidth:!0,className:this.props.classes.root,value:this.props.value,label:"site name",margin:"normal",name:"name",onChange:this.props.onChange}),i.a.createElement(gt.a,{fullWidth:!0,className:this.props.classes.root,value:this.props.url,label:"url",margin:"normal",name:"url",onChange:this.props.onChange}),this.props.error&&i.a.createElement(ft.a,{className:"".concat(this.props.classes.root," ").concat(this.props.classes.error)},this.props.error))}}]),e}(i.a.Component),St=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){return t.props.onSubmit(e)}},i.a.createElement(gt.a,{fullWidth:!0,className:this.props.classes.root,value:this.props.value,label:"subreddit: reactjs",margin:"normal",name:"url",onChange:this.props.onChange}),this.props.error&&i.a.createElement(ft.a,{className:"".concat(this.props.classes.root," ").concat(this.props.classes.error)},this.props.error))}}]),e}(i.a.Component),jt=Object(g.withStyles)(vt)(Et),kt=Object(g.withStyles)(vt)(St),yt=n(169);function At(t){return t.rss.channel.item}function Ot(t){var e=["title","link","description","item"],n=((t||{}).rss||{}).channel||{};return Object.keys(n).filter(function(t){return e.includes(t)}).length===e.length&&n.item.reduce(function(t,e){return void 0===e.channel&&void 0===e.title||void 0===e.link?t:t.concat(e)},[]).length===n.item.length}function wt(t){var e;return new yt.Parser({explicitArray:!1}).parseString(t,function(t,n){e=n}),e}function Ct(t){return t.data.children.map(function(t){return{title:t.data.title,link:t.data.url,description:t.data.selftext,pubDate:Nt(t.data.created_utc)}},[])}function Nt(t){var e=new Date(0);return e.setUTCSeconds(t),e.toDateString()}function It(t){var e=localStorage.getItem(t);return null===e?[]:JSON.parse(e)}function Rt(t,e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(tt.a)($.a.mark(function t(e,n){var a;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://cors-anywhere.herokuapp.com/".concat(e));case 2:if(a=t.sent,"reddit"!==n){t.next=5;break}return t.abrupt("return",a.json().catch(function(t){}));case 5:return t.t0=wt,t.next=8,a.text();case 8:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 10:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var Lt=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).validateURL=function(){var t=Object(tt.a)($.a.mark(function t(e){var a,i,r,s;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="reddit"===n.props.page?"https://reddit.com/r/".concat(e,".json"):e,t.next=3,Rt(a,n.props.page);case 3:i=t.sent,r="reddit"===n.props.page?404!==i.error:Ot(i),s="reddit"===n.props.page?"subreddit does not exist":"Invalid RSS url",r?n.setState({error:null,isValid:!0,isFetchingURL:!1}):n.setState({error:s,isValid:!1,isFetchingURL:!1});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n.state={add:!1,site:{name:"",url:""},error:null,isValidURL:!1,isFetchingURL:!1},n.handleInputChange=n.handleInputChange.bind(Object(p.a)(Object(p.a)(n))),n.handleClickButtonNew=n.handleClickButtonNew.bind(Object(p.a)(Object(p.a)(n))),n.handleClickButtonEdit=n.handleClickButtonEdit.bind(Object(p.a)(Object(p.a)(n))),n.validateURL=Object(et.debounce)(n.validateURL,1e3),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentDidUpdate",value:function(t){this.props.page!==t.page&&this.setState({add:!1,site:{name:"",url:""},error:null,isValidRSS:!1})}},{key:"handleClickButtonNew",value:function(){this.state.add&&this.props.onAddSite(this.state.site),this.setState({add:!this.state.add,site:{name:"",url:""}})}},{key:"handleClickButtonEdit",value:function(){this.state.add?this.setState({add:!1}):this.props.onToggleEdit()}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.isButtonNewDisabled()||this.handleClickButtonNew()}},{key:"handleInputChange",value:function(t){this.setState({site:Object(K.a)({},this.state.site,Object(N.a)({},t.target.name,t.target.value||"")),error:null,isValid:!1,isFetchingURL:!0}),t.target.value&&"url"===t.target.name&&this.validateURL(t.target.value)}},{key:"getButtonEditProps",value:function(){var t={value:"Cancel",icon:ct.a,variant:"contained",color:"secondary"};return this.state.add?t:this.props.isEditing?Object.assign(t,{value:"Close"}):{value:"Edit",icon:lt.a,variant:"outlined",color:"primary"}}},{key:"isButtonNewDisabled",value:function(){if(this.props.isEditing)return!0;if(this.state.add){if(!this.state.isValid)return!0;var t=this.state.site,e=t.name,n=t.url;return"reddit"===this.props.page?""===n:""===e||""===n}}},{key:"render",value:function(){var t=this.props.classes,e=this.state.add?"Save":"New",n=this.state.add?rt.a:at.a,a=this.getButtonEditProps();return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.buttonGroup},i.a.createElement(ht,{value:e,icon:n,onClick:this.handleClickButtonNew,isLoading:this.state.isFetchingURL,disabled:this.isButtonNewDisabled()}),i.a.createElement(ht,Object.assign({},a,{onClick:this.handleClickButtonEdit}))),i.a.createElement("div",{className:t.input},this.state.add&&("rss"===this.props.page?i.a.createElement(jt,{onChange:this.handleInputChange,onSubmit:this.handleSubmit,value:this.state.site.name,url:this.state.site.url,error:this.state.error}):i.a.createElement(kt,{onChange:this.handleInputChange,onSubmit:this.handleSubmit,url:this.state.site.url,error:this.state.error}))))}}]),e}(i.a.Component),Tt=Object(g.withStyles)(function(t){return{root:{borderBottom:"2px solid #757575"},buttonGroup:{display:"flex",justifyContent:"center"},input:{maxWidth:"85%",marginLeft:2*t.spacing.unit,marginRight:2*t.spacing.unit,paddingBottom:2*t.spacing.unit}}})(Lt);function Dt(t){var e=t.classes;return i.a.createElement("div",{className:e.root},i.a.createElement(dt.a,{className:e.circle}))}Dt.prototype={classes:Q.PropTypes.object.isRequired};var Mt=Object(g.withStyles)(function(t){return{root:{display:"flex",justifyContent:"center",minHeight:"250px",margin:"auto"},circle:{margin:"auto"}}})(Dt);function xt(t){var e=t.lists,n=t.isLoading;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement(Mt,null):i.a.createElement("section",null,e.map(function(t){return i.a.createElement(F.a,{key:t.link,component:"article",style:{margin:"0.5rem"}},i.a.createElement(F.d,{target:"_blank",rel:"noreferrer",href:t.link},i.a.createElement(F.c,{title:t.title,subheader:t.pubDate})),i.a.createElement(F.b,null,i.a.createElement(F.e,{component:"p",dangerouslySetInnerHTML:{__html:t.description}})))})))}var Ut=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).handleSaveSitesToLocalStorage=function(){return localStorage.setItem(n.state.page,JSON.stringify(n.state.listSites))},n.state={page:"rss",siteUrl:"",listSites:[],listArticles:[],isEditing:!1,isLoadingListArticles:!1},n.handleChangePage=n.handleChangePage.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.setState({listSites:It(this.state.page)}),window.addEventListener("beforeunload",this.handleSaveSitesToLocalStorage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleSaveSitesToLocalStorage),this.handleSaveSitesToLocalStorage()}},{key:"handleChangePage",value:function(t){this.handleSaveSitesToLocalStorage(),this.setState({page:t,listSites:It(t)})}},{key:"handleAddSite",value:function(t){0===this.state.listSites.filter(function(e){return e.url===t.url}).length&&(t.name||(t.name=t.url),this.setState({listSites:this.state.listSites.concat(t)}))}},{key:"handleSelectSite",value:function(t){var e=this,n="reddit"===this.state.page?"https://reddit.com/r/".concat(t.url,".json"):t.url;this.setState({siteUrl:t.url,isLoadingListArticles:!0},function(){Rt(n,e.state.page).then(function(t){var n=function(t,e){var n={rss:At,reddit:Ct};return n[t]?n[t](e):[]}(e.state.page,t);void 0===n&&(n=[]),e.setState({listArticles:n,isLoadingListArticles:!1})})})}},{key:"handleDeleteSite",value:function(t,e){t.stopPropagation();var n=this.state.listSites.filter(function(t){return t.url!==e.url});this.setState({listSites:n})}},{key:"handleToggleEdit",value:function(){this.setState({isEditing:!this.state.isEditing})}},{key:"render",value:function(){var t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,null),i.a.createElement(C,{page:this.state.page,onChange:this.handleChangePage}),i.a.createElement(q,null,i.a.createElement(z,null,i.a.createElement("div",null,i.a.createElement(Tt,{page:this.state.page,isEditing:this.state.isEditing,onAddSite:function(e){return t.handleAddSite(e)},onToggleEdit:function(){return t.handleToggleEdit()}}),i.a.createElement(X,{onClick:function(e){return t.handleSelectSite(e)},onClickIcon:function(e,n){return t.handleDeleteSite(e,n)},list:this.state.listSites,isEditing:this.state.isEditing}))),i.a.createElement(xt,{lists:this.state.listArticles,isLoading:this.state.isLoadingListArticles})))}}]),e}(a.Component);s.a.render(i.a.createElement(Ut,null),document.getElementById("root"))}},[[242,2,1]]]);
//# sourceMappingURL=main.3ca38a52.chunk.js.map